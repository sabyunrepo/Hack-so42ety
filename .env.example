# ==================================================
# MoriAI Storybook Service - Environment Variables
# Example file (.env.example)
# ==================================================

# --------------------------------------------------
# Application
# --------------------------------------------------
APP_ENV=dev                  # dev | prod
DEBUG=true
LOG_LEVEL=INFO


# --------------------------------------------------
# Server Ports
# --------------------------------------------------
BACKEND_PORT=8000
FRONTEND_PORT=5173


# --------------------------------------------------
# Database (PostgreSQL)
# --------------------------------------------------
POSTGRES_USER=moriai_user
POSTGRES_PASSWORD=your_postgres_password
POSTGRES_DB=moriai_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# SQLAlchemy Database URL
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}


# --------------------------------------------------
# JWT Authentication
# --------------------------------------------------
JWT_SECRET_KEY=your_jwt_secret_key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7


# --------------------------------------------------
# OAuth 2.0 (Google)
# --------------------------------------------------
GOOGLE_OAUTH_CLIENT_ID=your_google_oauth_client_id
GOOGLE_OAUTH_CLIENT_SECRET=your_google_oauth_client_secret
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:8000/auth/google/callback

# ==================== AI Providers ====================
# Story Generation
AI_STORY_PROVIDER=google  # google, openai, custom
GOOGLE_API_KEY=your-google-gemini-api-key
FK_TOLERANCE=10
MAX_BOOKS_PER_USER=3
MAX_PAGES_PER_BOOK=5
MAX_DIALOGUES_PER_PAGE=4
MAX_CHARS_PER_DIALOGUE=85
MAX_TITLE_LENGTH=20

# --------------------------------------------------
# AI Providers - Story
# --------------------------------------------------
AI_STORY_PROVIDER=google      # google | openai | custom
GOOGLE_API_KEY=your_google_ai_api_key

# Story / Content Limits
FK_TOLERANCE=10
MAX_BOOKS_PER_USER=3
MAX_PAGES_PER_BOOK=5
MAX_DIALOGUES_PER_PAGE=5
MAX_CHARS_PER_DIALOGUE=85
MAX_TITLE_LENGTH=20


# --------------------------------------------------
# AI Providers - Text To Speech (ElevenLabs)
# --------------------------------------------------
AI_TTS_PROVIDER=elevenlabs
ELEVENLABS_API_KEY=your_elevenlabs_api_key

TTS_DEFAULT_VOICE_ID=your_voice_id
TTS_DEFAULT_MODEL_ID=eleven_v3
TTS_DEFAULT_LANGUAGE=en
MAX_VOICE_CLONES_PER_USER=1

# Image Generation
AI_IMAGE_PROVIDER=runware  # google, custom, runware
RUNWARE_IMG2IMG_MODEL=google:4@1

# Video Generation
AI_VIDEO_PROVIDER=runware  # kling, custom
RUNWARE_API_KEY=XsdYy6dDj4ucDrS5wqNS24bgXbQSbOpZ
RUNWARE_API_URL=https://api.runware.ai/v1
RUNWARE_VIDEO_MODEL=klingai:6@0
RUNWARE_VIDEO_MODE=std
RUNWARE_VIDEO_DURATION=5
VIDEO_GENERATION_LIMIT=20

# AI retry settings
TASK_STORY_MAX_RETRIES=3
TASK_IMAGE_MAX_RETRIES=2
TASK_VIDEO_MAX_RETRIES=2
TASK_RETRY_DELAY=2.0
TASK_RETRY_EXPONENTIAL_BACKOFF=true

# --------------------------------------------------
# AI Providers - Image
# --------------------------------------------------
AI_IMAGE_PROVIDER=runware
RUNWARE_IMG2IMG_MODEL=google:4@1


# --------------------------------------------------
# AI Providers - Video
# --------------------------------------------------
AI_VIDEO_PROVIDER=runware
RUNWARE_API_KEY=your_runware_api_key
RUNWARE_API_URL=https://api.runware.ai/v1

RUNWARE_VIDEO_MODEL=klingai:6@0
RUNWARE_VIDEO_MODE=std
RUNWARE_VIDEO_DURATION=5
VIDEO_GENERATION_LIMIT=20


# --------------------------------------------------
# AI Task Retry Policy
# --------------------------------------------------
TASK_STORY_MAX_RETRIES=3
TASK_IMAGE_MAX_RETRIES=2
TASK_VIDEO_MAX_RETRIES=2
TASK_RETRY_DELAY=2.0
TASK_RETRY_EXPONENTIAL_BACKOFF=true


# --------------------------------------------------
# Storage Configuration
# --------------------------------------------------
STORAGE_PROVIDER=local        # local | s3 (deprecated) | r2
STORAGE_BASE_PATH=/app/data


# --------------------------------------------------
# AWS S3 (Deprecated, optional)
# --------------------------------------------------
AWS_S3_BUCKET_NAME=your_s3_bucket_name
AWS_S3_REGION=ap-northeast-2
AWS_S3_PRESIGNED_URL_EXPIRATION=60
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key


# --------------------------------------------------
# Cloudflare R2 (S3 Compatible)
# --------------------------------------------------
R2_ENDPOINT_URL=https://[account-id].r2.cloudflarestorage.com
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=moriai-assets
R2_REGION_NAME=auto


# --------------------------------------------------
# Cloudflare CDN (Signed URL)
# --------------------------------------------------
CLOUDFLARE_CDN_DOMAIN=https://cdn.moriai.com
CLOUDFLARE_SIGNING_KEY=your_cloudflare_signing_key


# --------------------------------------------------
# CORS
# --------------------------------------------------
CORS_ORIGINS=http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*


# --------------------------------------------------
# Cloudflare Tunnel
# --------------------------------------------------
CLOUDFLARE_TUNNEL_TOKEN=your_cloudflare_tunnel_token


# --------------------------------------------------
# HTTP Client
# --------------------------------------------------
HTTP_TIMEOUT=60.0
HTTP_READ_TIMEOUT=300.0
HTTP_MAX_CONNECTIONS=10


# --------------------------------------------------
# Redis
# --------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379


# --------------------------------------------------
# Testing
# --------------------------------------------------
TEST_DATABASE_URL=postgresql+asyncpg://test_user:test_password@postgres:5432/test_db


# --------------------------------------------------
# Logging & Monitoring
# --------------------------------------------------
SENTRY_DSN=
SENTRY_ENVIRONMENT=dev
SENTRY_TRACES_SAMPLE_RATE=0.0
LOG_JSON_FORMAT=False


# --------------------------------------------------
# Analytics (PostHog - Frontend Public)
# --------------------------------------------------
VITE_PUBLIC_POSTHOG_KEY=your_posthog_public_key
VITE_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com
